{%-extends "base.html"-%}

{%-block head-%}
{%-endblock-%}

{%-block content-%}
<div class="row m-0 p-0 justify-content-center w-100">
    <div class="col-lg-6 m-0 p-4">
        <div class="row m-0 p-4 bg-light rounded-4">
            <div class="col-12 mb-4 text-center">
                <h5>{{ page_title.title() }}</h5>
            </div>
            <form class="col-12" action="{{url_for(page_title)}}" method="post" onsubmit="submitRegistration(this); return false">
                <div class="input-group mb-4">
                    <span class="input-group-text bg-info text-white border-0"><i class="bi bi-person-fill"></i></span>
                    <input name="username" class="form-control" type="text" placeholder="Username" value="{%-if username-%}{{username}}{%-endif-%}" required>
                </div>
                <div class="input-group mb-4">
                    <span class="input-group-text bg-info text-white border-0"><i class="bi bi-key-fill"></i></span>
                    <input name="password" class="form-control" type="password" placeholder="Password" required>
                </div>
                <div class="input-group">
                    <span class="input-group-text bg-info text-white border-0"><i class="bi bi-key"></i></span>
                    <input name="password2" class="form-control" type="password" placeholder="Confirm Password" onkeyup="validatePassword()" required>
                </div>
                <div id="pass2-notice" class="mt-2 text-center" hidden><span class="text-danger">Passwords doesn't match</span></div>
                <div class="mt-4 d-grid text-center">
                    <button type="submit" class="btn btn-info text-white">{{ page_title.title() }}</button>
                </div>
                {%-if error-%}<div class="mt-2 text-center"><span class="text-danger">{{error.capitalize()}}</span></div>{%-endif-%}
            </form>
        </div>
    </div>
</div>
{%-endblock-%}

{%-block footer-%}
<script>
    var pass1 = document.querySelector('input[name="password"]');
    var pass2 = document.querySelector('input[name="password2"]');
    var pass2_notice = document.getElementById('pass2-notice');
    function validatePassword() {
        if ( pass1.value === pass2.value ) {
            pass2_notice.hidden = true;
            return true;
        } else {
            pass2_notice.hidden = false;
            return false
        }
    }
    function submitRegistration(element) {
        if ( validatePassword() == true ) {
            element.submit();
        }
    }
</script>
{%-endblock-%}